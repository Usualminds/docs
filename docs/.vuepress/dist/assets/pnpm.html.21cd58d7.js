import{r as a,o as d,c as l,b as n,a as o,F as c,d as t,e}from"./app.8eeab1a8.js";import{_ as p}from"./plugin-vue_export-helper.21dcd24c.js";const r={},i=t('<h1 id="pnpm" tabindex="-1"><a class="header-anchor" href="#pnpm" aria-hidden="true">#</a> pnpm</h1><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gytctrc7i6j306904gmx1.jpg" alt=""></p><h2 id="\u80CC\u666F" tabindex="-1"><a class="header-anchor" href="#\u80CC\u666F" aria-hidden="true">#</a> \u80CC\u666F</h2>',3),_=e("\u5982\u679C\u4F60\u4ECE\u4E8B\u8FC7\u524D\u7AEF\u65B9\u9762\u7684\u5DE5\u4F5C\u548C\u5F00\u53D1\uFF0C\u76F8\u4FE1\u4F60\u5BF9 "),h=n("code",null,"npm",-1),u=e(" \u548C "),m=n("code",null,"yarn",-1),b=e(" \u8FD9\u6837\u7684\u5DE5\u5177\u5DF2\u7ECF\u518D\u719F\u6089\u4E0D\u8FC7\u4E86\u3002\u4F5C\u4E3A\u5305\u7BA1\u7406\u5DE5\u5177\uFF0C"),g=n("code",null,"npm",-1),k=e(" \u5DF2\u7ECF\u6709\u4E86\u957F\u8DB3\u7684"),f={href:"https://github.com/npm/cli/blob/latest/changelogs/CHANGELOG-1.md",target:"_blank",rel:"noopener noreferrer"},y=e("\u5386\u53F2"),v=e("\u3002\u4E00\u4E2A\u9879\u76EE\u521D\u59CB\u5316\u8FC7\u7A0B\u90FD\u9700\u8981\u901A\u8FC7 "),x=n("code",null,"npm install",-1),j=e(" \u547D\u4EE4\u5B89\u88C5\u76F8\u5173\u7684\u4F9D\u8D56\u5230 "),w=n("code",null,"node_modules",-1),N=e(" \u76EE\u5F55\u4E0B,\u5BF9\u4E8E\u8F83\u5927\u578B\u7684\u524D\u7AEF\u9879\u76EE\uFF0C"),A=n("code",null,"node_modules",-1),E=e(" \u7684\u5927\u5C0F\u5F88\u591A\u65F6\u5019\u662F\u8D85\u4E4E\u6211\u4EEC\u60F3\u8C61\u7684\u3002\u800C "),q=n("code",null,"npm",-1),C=e(" \u5728\u7248\u672C\u66F4\u65B0\u8FED\u4EE3\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u4E5F\u4E00\u76F4\u5728\u4F18\u5316\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4E0B\u9762\u6211\u4EEC\u5C31\u7B80\u8981\u804A\u804A "),z=n("code",null,"npm",-1),B=e(" \u7684\u53D1\u5C55\u5386\u7A0B\u3002"),V=t('<h2 id="npm-\u53D1\u5C55" tabindex="-1"><a class="header-anchor" href="#npm-\u53D1\u5C55" aria-hidden="true">#</a> npm \u53D1\u5C55</h2><h3 id="npm2" tabindex="-1"><a class="header-anchor" href="#npm2" aria-hidden="true">#</a> npm2</h3><p>\u5728 <code>npm2</code> \u53D1\u5C55\u9636\u6BB5\uFF0C\u5B89\u88C5\u4F9D\u8D56\u662F\u76F8\u5BF9\u6BD4\u8F83\u76F4\u63A5\u7684\uFF0C\u5B83\u4F1A\u76F4\u63A5\u6309\u7167\u914D\u7F6E\u6587\u4EF6 <code>package.json</code> \u4E2D\u7684\u4F9D\u8D56\u9879\u53BB\u4E0B\u8F7D\u76F8\u5173\u4F9D\u8D56\u5305\uFF0C\u800C\u4F9D\u8D56\u5305\u7684\u7EC4\u7EC7\u5F62\u5F0F\u5219\u662F\u6309\u7167\u6811\u5F62\u7ED3\u6784\u53BB\u6392\u5217\u7684\u3002\u7531\u4E8E\u4E0D\u540C\u7684\u5305\u7684\u4F9D\u8D56\u5173\u7CFB\u5728\u7248\u672C\u4E0A\u5DEE\u5F02\u8F83\u5927\uFF0C\u4F9D\u8D56\u5173\u7CFB\u76F8\u5BF9\u590D\u6742\uFF0C\u6240\u4EE5 <code>npm2</code> \u76F4\u63A5\u6309\u7167\u914D\u7F6E\u53BB\u4E0B\u8F7D\u5E76\u7EC4\u7EC7\u4F9D\u8D56\u7684\u65B9\u5F0F\uFF0C\u662F\u7B80\u5355\u660E\u6670\u7684\u505A\u6CD5\uFF0C\u4FDD\u8BC1\u4E86\u5404\u4E2A\u4F9D\u8D56\u7684\u72EC\u7ACB\u6027\uFF0C\u5728\u4F9D\u8D56\u53D8\u66F4\u65F6\uFF0C\u76F8\u4E92\u5E76\u4E0D\u5F71\u54CD\uFF0C\u5176\u5173\u7CFB\u53EF\u4EE5\u901A\u8FC7\u4E0B\u56FE\u6765\u63CF\u8FF0\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gytcts9cvlj316c0no75z.jpg" alt=""></p><p>\u4ECE\u4E0A\u56FE\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230</p><ol><li><code>A</code>\u3001<code>B</code>\u3001<code>C</code> \u5305\u76F8\u4E92\u72EC\u7ACB</li><li><code>A</code>\u3001<code>B</code>\u3001<code>C</code> \u5305\u53EF\u80FD\u4F1A\u4F9D\u8D56\u76F8\u540C\u7684\u5305\uFF0C\u6BD4\u5982 <strong><code>D@1.0</code></strong></li><li><code>A</code>\u3001<code>B</code>\u3001<code>C</code> \u5305\u53EF\u80FD\u4F1A\u5B58\u5728\u8F83\u6DF1\u7684\u4F9D\u8D56\u5C42\u7EA7\uFF0C\u6BD4\u5982 <strong><code>C package</code></strong></li></ol><p>\u5176\u4E2D <code>2</code> \u548C <code>3</code> \u8FD9\u4E24\u70B9\u7684\u8D1F\u9762\u5F71\u54CD\u4F1A\u968F\u7740\u9879\u76EE\u590D\u6742\u5EA6\u800C\u4E0A\u5347\uFF0C\u53EF\u80FD\u4F1A\u5BFC\u81F4\u7684\u51E0\u4E2A\u95EE\u9898</p>',7),L=n("li",null,[e("\u8F83\u5927\u7684\u5197\u4F59\u3002\u591A\u6B21\u4E0B\u8F7D\u7684\u76F8\u540C\u7684\u4F9D\u8D56\u5305 "),n("strong",null,[n("code",null,"D@1.0")]),e("\uFF0C\u65E0\u6CD5\u5B9E\u73B0\u5171\u4EAB")],-1),G=e("\u8F83\u6DF1\u5C42\u7EA7\u7684\u4F9D\u8D56\u6811\u3002 "),I=n("code",null,"node_modules",-1),S=e(" \u4F9D\u8D56\u5305\u8DEF\u5F84\u8FC7\u957F\uFF0C\u8D85\u51FA\u64CD\u4F5C\u7CFB\u7EDF\u6700\u957F\u8DEF\u5F84\u9650\u5236\uFF08 "),W=n("code",null,"windows",-1),F=e("\uFF1A"),J=n("code",null,"260",-1),P=e(" \u5B57\u7B26\uFF0C"),H=n("code",null,"macos",-1),M=e("\uFF1A"),D=n("code",null,"1024",-1),O=e(" \u5B57\u7B26\uFF09\uFF0C\u53C2\u89C1\uFF1A "),K={href:"https://github.com/npm/npm/issues/3697",target:"_blank",rel:"noopener noreferrer"},T=e("Too many dependencies break the Windows file system"),Y={href:"https://docs.microsoft.com/en-us/windows/win32/fileio/maximum-file-path-limitation?tabs=cmd",target:"_blank",rel:"noopener noreferrer"},$=e("Maximum Path Length Limitation"),Q={href:"https://stackoverflow.com/questions/1880321/why-does-the-260-character-path-length-limit-exist-in-windows",target:"_blank",rel:"noopener noreferrer"},R=e("Why does the 260 character path length limit exist in Windows?"),U=n("li",null,"\u592A\u6DF1\u7684\u5C42\u7EA7\u5BFC\u81F4\u6587\u4EF6\u67E5\u627E\u590D\u6742\u5EA6\u4E0A\u5347\uFF0C\u4E25\u91CD\u5F71\u54CD\u6027\u80FD\uFF0C\u589E\u52A0\u8017\u65F6",-1),X=n("blockquote",null,[n("p",null,[e("Note: \u901A\u8FC7 "),n("code",null,"npm ls --depth=n"),e(" \u67E5\u770B\u9879\u76EE\u76F8\u5173\u4F9D\u8D56\u5C42\u7EA7\u6DF1\u5EA6")])],-1),Z=n("h3",{id:"npm3",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#npm3","aria-hidden":"true"},"#"),e(" npm3")],-1),nn=e("\u4E3A\u89E3\u51B3 "),en=n("code",null,"npm2",-1),sn=e(" \u4E2D\u5B58\u5728\u7684\u5197\u4F59\u548C\u4F9D\u8D56\u6811\u95EE\u9898\uFF0C"),on=n("code",null,"npm3",-1),tn=e(" \u5BF9\u4F9D\u8D56\u9879\u8FDB\u884C\u4E86"),an={href:"https://github.com/npm/cli/blob/latest/changelogs/CHANGELOG-3.md",target:"_blank",rel:"noopener noreferrer"},dn=e("\u4F9D\u8D56\u6241\u5E73\u5316\u8BA8\u8BBA\u548C\u5904\u7406"),ln=n("p",null,[n("img",{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gyt34wicfwj31ka0emjvk.jpg",alt:""})],-1),cn=t("\u6241\u5E73\u5316\u5177\u4F53\u6765\u8BB2\u5C31\u662F\u4F9D\u8D56\u4E0D\u5728\u6309\u7167\u6811\u578B\u8FDB\u884C\u5B89\u88C5\uFF0C\u800C\u662F\u5B89\u88C5\u5C06\u4F9D\u8D56\u5B89\u88C5\u5728\u540C\u7EA7\u76EE\u5F55\u4E0B\uFF0C<code>npm install</code> \u5B89\u88C5\u4F9D\u8D56\u65F6\uFF0C\u4F1A\u6309\u7167\u914D\u7F6E\u6587\u4EF6 <code>package.json</code> \u91CC\u7684\u4F9D\u8D56\u987A\u5E8F\u8FDB\u884C\u89E3\u6790\uFF0C\u9047\u5230\u65B0\u5305\u5C31\u628A\u5B83\u653E\u5728\u7B2C\u4E00\u5C42\u7EA7\u7684\u76EE\u5F55\uFF08\u5982 <strong><code>D@1.0</code>\u3001<code>E@1.0</code>\u3001<code>F@1.0</code></strong>\uFF09\uFF0C\u540E\u9762\u5982\u679C\u9047\u5230\u7B2C\u4E00\u7EA7\u76EE\u5F55\u5DF2\u6709\u7684\u5305\uFF0C\u4F1A\u5148\u8FDB\u884C\u4F9D\u8D56\u7248\u672C\u5224\u65AD\uFF0C\u5982\u679C\u7248\u672C\u4E00\u6837\u5219\u5FFD\u7565\uFF0C\u5426\u5219\u4F1A\u6309\u7167 <code>npm2</code> \u7684\u65B9\u5F0F\u4F9D\u6B21\u6302\u5728\u4F9D\u8D56\u5305\u76EE\u5F55\u4E0B,\u8FD9\u6837\u5904\u7406\u7684\u539F\u7406\u9075\u5FAA\u4E86",9),pn={href:"https://nodejs.org/api/modules.html#all-together",target:"_blank",rel:"noopener noreferrer"},rn=n("code",null,"Nodejs",-1),_n=e("\u7684\u4F9D\u8D56\u89E3\u6790\u89C4\u5219"),hn=e("\uFF1A"),un=n("strong",null,[e("\u5F53\u524D\u76EE\u5F55\u4E0B\u6CA1\u6709\u627E\u5230"),n("code",null,"node_modules"),e("\uFF0C\u5B83\u5C06\u9012\u5F52\u89E3\u6790\u7236\u76EE\u5F55\u4E0B\u7684"),n("code",null,"node_modules")],-1),mn=e("\u3002"),bn=t('<p>\u4F7F\u7528 <code>npm3</code> \u5B89\u88C5\u4F9D\u8D56\u540E\u5982\u4E0B\u56FE\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gyt34x0kxwj31me0hggng.jpg" alt=""></p><p>\u8FD9\u79CD\u6241\u5E73\u5316\u5904\u7406\u65B9\u5F0F\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u7F13\u89E3\u4E86\u5197\u4F59\u548C\u4F9D\u8D56\u6811\u95EE\u9898\uFF0C\u540C\u65F6 <code>npm3</code> \u8FD8\u652F\u6301\u52A8\u6001\u5B89\u88C5\u66F4\u65B0\u5305\uFF0C\u5982\u679C\u4F9D\u8D56\u6709\u66F4\u65B0\uFF0C\u53EF\u4EE5\u901A\u8FC7 <code>npm dedupe</code> \u547D\u4EE4\u5BF9\u4F9D\u8D56\u6811\u8FDB\u884C\u4F18\u5316\u3002</p><p>\u4F46\u662F <code>npm3</code> \u4E5F\u5B58\u5728\u90E8\u5206\u95EE\u9898\uFF0C\u6BD4\u5982\uFF1A</p>',4),gn={href:"https://rushjs.io/pages/advanced/phantom_deps/",target:"_blank",rel:"noopener noreferrer"},kn=e("phantom_deps(\u5E7B\u5F71\u4F9D\u8D56)"),fn=e("\u3002"),yn=n("strong",null,[n("code",null,"npm3"),e("\u4E0D\u4F1A\u4EE5\u786E\u5B9A\u7684\u65B9\u5F0F\u5B89\u88C5\u4F9D\u8D56\u9879")],-1),vn=e("\u3002\u4E3E\u4F8B\u6765\u8BF4\uFF1A\u6211\u4EEC\u5728 "),xn=n("code",null,"NodeJS",-1),jn=e(" \u4E2D "),wn=n("code",null,"require()",-1),Nn=e(" \u7684\u51FD\u6570\uFF0C\u4E0D\u9700\u8981\u8003\u8651\u914D\u7F6E\u6587\u4EF6 "),An=n("code",null,"package.json",-1),En=e(" \u4E2D\u662F\u5426\u6709\u8BE5\u4F9D\u8D56\u9879\u3002\u8FD9\u53EF\u80FD\u4F1A\u5BFC\u81F4\u4F9D\u8D56\u7248\u672C\u4E0D\u517C\u5BB9\uFF0C\u5E76\u4E14\u5F00\u53D1\u8005\u4E0D\u5BB9\u6613\u53D1\u73B0\uFF1B\u53E6\u5916\uFF0C\u7531\u4E8E"),qn={href:"https://nodejs.org/api/modules.html#all-together",target:"_blank",rel:"noopener noreferrer"},Cn=n("code",null,"Nodejs",-1),zn=e("\u7684\u4F9D\u8D56\u89E3\u6790\u89C4\u5219"),Bn=e("\uFF0C\u8FD9\u8FD8\u4F1A\u5BFC\u81F4\u5E7B\u5F71 "),Vn=n("code",null,"node_modules",-1),Ln=e(" \uFF0C\u5373\u4F9D\u8D56\u5411\u4E0A\u67E5\u627E\uFF0C\u53EF\u80FD\u4F1A\u8D8A\u8FC7\u4EE3\u7801\u76EE\u5F55\u81EA\u8EAB\u7684 "),Gn=n("code",null,"node_modules",-1),In=e(" \u3002\u5982\u4E0B\uFF1A"),Sn=t(`<div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>- my-monorepo/
  - package.json
  - node_modules/
    - semver/
    - ...
  - my-monorepo/my-library/
    - package.json
    - lib/
      - index.js
    - node_modules/
      - brace-expansion
      - minimatch
      - ...
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><code>my-monorepo/my-library/lib/index.js</code> \u53EF\u80FD\u4F7F\u7528\u7684\u662F<code>my-monorepo/node_modules</code> \u4E2D\u7684\u4F9D\u8D56\uFF0C\u800C\u975E\u81EA\u8EAB\u76EE\u5F55 <code>my-monorepo/my-library/node_modules</code></p>`,2),Wn={href:"https://rushjs.io/pages/advanced/npm_doppelgangers/",target:"_blank",rel:"noopener noreferrer"},Fn=e("npm doppelgangers(npm \u5206\u8EAB)"),Jn=e("\u3002\u7B80\u5355\u6765\u8BB2\uFF0Cnpm \u5206\u8EAB\u662F\u6307\u540C\u4E00\u4E2A\u4F9D\u8D56\u7684\u4E0D\u540C\u7248\u672C\u4F1A\u51FA\u73B0\u5728 "),Pn=n("code",null,"node_modules",-1),Hn=e(" \u4E2D\uFF0C\u6BD4\u5982\u9879\u76EE\u4E2D\u540C\u65F6\u4F9D\u8D56\u4E86 "),Mn=n("code",null,"A@1.0.0",-1),Dn=e(" \u548C "),On=n("code",null,"A@2.0.0",-1),Kn=e("\uFF0C\u65E0\u8BBA\u662F\u6241\u5E73\u5316\u5904\u7406"),Tn=n("code",null,"A@1.0.0",-1),Yn=e(" \u6216 "),$n=n("code",null,"A@2.0.0",-1),Qn=e("\uFF0C\u53E6\u4E00\u4E2A\u4F9D\u8D56\u8FD8\u662F\u4F1A\u88AB\u91CD\u590D\uFF0C\u5982\u679C\u8FD9\u6837\u7684\u5206\u8EAB\u8F83\u591A\uFF0C\u5C31\u4F1A\u5BFC\u81F4\u4E00\u4E9B\u6F5C\u5728\u95EE\u9898\uFF0C\u6BD4\u5982\u6269\u5C55\u5305\u5927\u5C0F\u53D8\u5927\u3001\u76F8\u5173\u7C7B\u578B\u6821\u9A8C\u4EA4\u53C9\u7B49"),Rn=t('<h3 id="npm5" tabindex="-1"><a class="header-anchor" href="#npm5" aria-hidden="true">#</a> npm5</h3><p>npm5 \u901A\u8FC7\u6DFB\u52A0 <code>lock</code> \u6587\u4EF6\u6765\u8BB0\u5F55\u4F9D\u8D56\u6811\u4FE1\u606F\uFF0C\u8FDB\u884C\u4F9D\u8D56\u9501\u5B9A,\u4ECE\u800C\u552F\u4E00\u786E\u5B9A <code>node_modules</code> \u7684\u7ED3\u6784,\u8FD9\u6837\u5904\u7406\u53EF\u4EE5\u4FDD\u8BC1\u56E2\u961F\u6210\u5458\u4F7F\u7528\u540C\u4E00\u4EFD<code>node_modules</code>\u4F9D\u8D56\u7ED3\u6784\u3002\u4F46\u662F\uFF0C\u6211\u4EEC\u524D\u6587\u63D0\u5230\u7684\u5E73\u94FA\u5F0F\u7684\u7B97\u6CD5\u7684\u590D\u6742\u6027\u3001\u5E7B\u5F71\u4F9D\u8D56\u548C\u5206\u8EAB\u95EE\u9898\u4ECD\u7136\u6CA1\u6709\u89E3\u51B3\u3002</p><h2 id="pnpm-\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#pnpm-\u7B80\u4ECB" aria-hidden="true">#</a> pnpm \u7B80\u4ECB</h2><p>\u524D\u6587\u6211\u4EEC\u5927\u81F4\u68B3\u7406\u4E86 <code>npm</code> \u7684\u53D1\u5C55\u548C\u9057\u7559\u95EE\u9898\u3002\u800C <code>pnpm</code> \u6BD4\u8F83\u5DE7\u5999\u5730\u89E3\u51B3\u4E86\u5B83\u4EEC\uFF0C\u5E76\u4E14\u6781\u5927\u5730\u63D0\u5347\u4E86\u4F9D\u8D56\u5305\u7BA1\u7406\u7684\u6548\u7387\u3002</p>',4),Un=n("code",null,"pnpm",-1),Xn=e(" \u6307 "),Zn=n("code",null,"performant npm",-1),ne=e("\uFF08\u9AD8\u6027\u80FD\u7684 npm\uFF09\uFF0C\u5982 "),ee={href:"https://pnpm.io/",target:"_blank",rel:"noopener noreferrer"},se=e("pnpm \u5B98\u7F51"),oe=e("\u6240\u8A00\uFF0C\u5B83\u662F"),te=n("strong",null,"\u5FEB\u901F\u7684\uFF0C\u8282\u7701\u78C1\u76D8\u7A7A\u95F4\u7684\u5305\u7BA1\u7406\u5DE5\u5177",-1),ae=e("\uFF0C\u540C\u65F6\uFF0C\u5B83\u4E5F\u8F83\u597D\u5730\u652F\u6301\u4E86 "),de=n("code",null,"workspace",-1),le=e(" \u548C "),ce=n("code",null,"monorepos",-1),pe=e("\u3002"),re=n("p",null,[n("img",{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gyt34xkxo6j31hc0u0jwy.jpg",alt:""})],-1),ie=n("p",null,[e("\u4E3E\u4F8B\u6765\u8BF4\uFF0C\u5982\u679C\u9879\u76EE\u4E2D\uFF0C\u4F60\u4F7F\u7528\u4E86\u67D0\u4E2A\u4F9D\u8D56\u9879\u7684\u591A\u4E2A\u7248\u672C\uFF0C\u90A3\u4E48 "),n("code",null,"pnpm"),e(" \u53EA\u4F1A\u5C06\u6709\u5DEE\u5F02\u7684\u6587\u4EF6\u6DFB\u52A0\u5230\u4ED3\u5E93\u3002\u5982\u679C\u67D0\u4E2A\u4F9D\u8D56\u5305\u6709 100 \u4E2A\u6587\u4EF6\uFF0C\u800C\u5B83\u7684\u65B0\u7248\u672C\u53EA\u6539\u53D8\u4E86\u5176\u4E2D 1 \u4E2A\u6587\u4EF6\u3002\u90A3\u4E48 "),n("code",null,"pnpm update"),e(" \u65F6\u53EA\u4F1A\u6DFB\u52A0 1 \u4E2A\u65B0\u6587\u4EF6\uFF0C\u800C\u4E0D\u4F1A\u590D\u5236\u6574\u4E2A\u65B0\u7248\u672C\u7684\u6240\u6709\u5305\u3002\u6B64\u5916\u3002\u6240\u6709\u6587\u4EF6\u90FD\u4F1A\u5B58\u50A8\u5728\u786C\u76D8\u4E0A\u7684\u67D0\u4E00\u4F4D\u7F6E\u3002 \u5F53\u4F9D\u8D56\u5305\u88AB\u88AB\u5B89\u88C5\u65F6\uFF0C\u5176\u4E2D\u7684\u6587\u4EF6\u4F1A\u786C\u94FE\u63A5\u5230\u8FD9\u4E00\u4F4D\u7F6E\uFF0C\u800C\u4E0D\u4F1A\u5360\u7528\u989D\u5916\u7684\u78C1\u76D8\u7A7A\u95F4\u3002\u540C\u65F6\uFF0C\u9879\u76EE\u4E2D\u5141\u8BB8\u5171\u4EAB\u540C\u4E00\u7248\u672C\u7684\u4F9D\u8D56\u3002\u63A5\u4E0B\u6765\u6211\u4EEC\u5148\u4E86\u89E3\u4E0B "),n("code",null,"pnpm"),e(" \u7684\u4F7F\u7528\u6548\u679C")],-1),_e=n("h2",{id:"pnpm-\u6548\u679C",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#pnpm-\u6548\u679C","aria-hidden":"true"},"#"),e(" pnpm \u6548\u679C")],-1),he=e("\u4E0E npm\u3001yarn\u3001yarn pnp \u5DE5\u5177\u94FE\u6548\u679C\u5BF9\u6BD4\uFF0C\u6765\u81EA "),ue={href:"https://pnpm.io/zh/benchmarks",target:"_blank",rel:"noopener noreferrer"},me=e("pnpm benchmarks"),be=t('<table><thead><tr><th>action</th><th>cache</th><th>lockfile</th><th>node_modules</th><th>npm</th><th>pnpm</th><th>Yarn</th><th>Yarn PnP</th></tr></thead><tbody><tr><td>install</td><td></td><td></td><td></td><td>1m 9.5s</td><td>15.3s</td><td>16.6s</td><td>23.6s</td></tr><tr><td>install</td><td>\u2714</td><td>\u2714</td><td>\u2714</td><td>2.4s</td><td>1.3s</td><td>2.3s</td><td>n/a</td></tr><tr><td>install</td><td>\u2714</td><td>\u2714</td><td></td><td>14.8s</td><td>4s</td><td>6.8s</td><td>1.5s</td></tr><tr><td>install</td><td>\u2714</td><td></td><td></td><td>21.8s</td><td>8.9s</td><td>11.2s</td><td>6.2s</td></tr><tr><td>install</td><td></td><td>\u2714</td><td></td><td>35.4s</td><td>13.4s</td><td>12s</td><td>17.9s</td></tr><tr><td>install</td><td>\u2714</td><td></td><td>\u2714</td><td>3.1s</td><td>1.9s</td><td>7s</td><td>n/a</td></tr><tr><td>install</td><td></td><td>\u2714</td><td>\u2714</td><td>2.4s</td><td>1.3s</td><td>7.6s</td><td>n/a</td></tr><tr><td>install</td><td></td><td></td><td>\u2714</td><td>3s</td><td>6.1s</td><td>11.8s</td><td>n/a</td></tr><tr><td>update</td><td>n/a</td><td>n/a</td><td>n/a</td><td>2.3s</td><td>11.8s</td><td>15.5s</td><td>28.3s</td></tr></tbody></table><p>\u4ECE\u4E0A\u8868\u6570\u636E\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\uFF0C<code>pnpm</code> \u7684\u5404\u9879\u6027\u80FD\u5747\u6BD4\u5176\u5B83\u5305\u7BA1\u7406\u5DE5\u5177\u6709\u4F18\u52BF\uFF0C\u90A3\u4F60\u53EF\u80FD\u4F1A\u60F3\uFF0C\u4E3A\u4EC0\u4E48 <code>pnpm</code> \u6709\u5982\u6B64\u4F18\u8D8A\u7684\u8868\u73B0\u{1F914}\uFF0C\u63A5\u4E0B\u6765\u6211\u4EEC\u804A\u804A <code>pnpm</code> \u7684\u4E3B\u8981\u539F\u7406</p><h2 id="pnpm-\u7684\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#pnpm-\u7684\u539F\u7406" aria-hidden="true">#</a> pnpm \u7684\u539F\u7406</h2><p><code>pnpm</code> \u4E3B\u8981\u6709\u4E24\u4E2A\u4E0D\u540C\u4E0E\u5176\u5305\u7BA1\u7406\u5DE5\u5177\u7684\u7279\u6027\uFF1A</p><h3 id="\u57FA\u4E8E\u786C\u94FE\u63A5\u7684-node-modules" tabindex="-1"><a class="header-anchor" href="#\u57FA\u4E8E\u786C\u94FE\u63A5\u7684-node-modules" aria-hidden="true">#</a> \u57FA\u4E8E\u786C\u94FE\u63A5\u7684 <code>node_modules</code></h3>',5),ge=n("code",null,"pnpm",-1),ke=e(" \u521B\u5EFA\u4ECE\u5168\u5C40\u5B58\u50A8\u5230\u9879\u76EE\u4E2D "),fe=n("code",null,"node_modules",-1),ye=e(" \u6587\u4EF6\u5939\u7684"),ve={href:"https://zh.wikipedia.org/wiki/%E7%A1%AC%E9%93%BE%E6%8E%A5",target:"_blank",rel:"noopener noreferrer"},xe=e("\u786C\u94FE\u63A5"),je=e("\uFF0C\u800C\u786C\u94FE\u63A5\u6307\u5411\u78C1\u76D8\u4E0A\u539F\u59CB\u6587\u4EF6\u6240\u5728\u7684\u540C\u4E00\u4F4D\u7F6E\uFF0C\u5177\u4F53\u6765\u8BF4\u5C31\u662F "),we=n("code",null,"node_modules",-1),Ne=e(" \u4E2D\u6BCF\u4E2A\u5305\u7684\u6BCF\u4E2A\u6587\u4EF6\u90FD\u662F\u6765\u81EA"),Ae={href:"https://en.wikipedia.org/wiki/Content-addressable_storage",target:"_blank",rel:"noopener noreferrer"},Ee=e("\u5185\u5BB9\u53EF\u5BFB\u5740\u5B58\u50A8"),qe=e("\u7684\u786C\u94FE\u63A5\uFF0C\u7B80\u8A00\u4E4B\uFF0C\u5C31\u662F\u7279\u5B9A\u7248\u672C\u548C\u540D\u79F0\u7684\u5305\u5168\u5C40\u53EA\u6709\u4E00\u4EFD\u3002\u4E3E\u4F8B\u6765\u770B\uFF1A"),Ce=t(`<div class="language-file ext-file line-numbers-mode"><pre class="language-file"><code>node_modules
\u2514\u2500\u2500 .pnpm
    \u251C\u2500\u2500 bar@1.0.0
    \u2502   \u2514\u2500\u2500 node_modules
    \u2502       \u2514\u2500\u2500 bar -&gt; &lt;store&gt;/bar
    \u2502           \u251C\u2500\u2500 index.js
    \u2502           \u2514\u2500\u2500 package.json
    \u2514\u2500\u2500 foo@1.0.0
        \u2514\u2500\u2500 node_modules
            \u2514\u2500\u2500 foo -&gt; &lt;store&gt;/foo
                \u251C\u2500\u2500 index.js
                \u2514\u2500\u2500 package.json
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>node_modules</code> \u4E0B\u9762\u7684\u552F\u4E00\u6587\u4EF6\u5939\u53EB\u505A <code>.pnpm</code>, <code>.pnpm</code> \u4E0B\u9762\u662F\u4E00\u4E2A <code>&lt;PACKAGE_NAME\uFF20VERSION&gt;</code> \u6587\u4EF6\u5939\uFF0C\u800C\u5728\u5176\u4E0B\u9762 <code>&lt;PACKAGE_NAME&gt;</code> \u7684\u6587\u4EF6\u5939\u662F\u4E00\u4E2A\u57FA\u4E8E\u5185\u5BB9\u53EF\u5BFB\u5740\u5B58\u50A8\u7684\u786C\u94FE\u63A5\u3002\u540C\u65F6\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u901A\u8FC7 <code>pnpm root</code> \u547D\u4EE4\u6765\u6253\u5370\u5F53\u524D\u9879\u76EE\u4E2D\u5B58\u653E\u6A21\u5757\uFF08modules\uFF09\u7684\u6709\u6548\u76EE\u5F55</p><h3 id="\u57FA\u4E8E\u4F9D\u8D56\u89E3\u6790\u7684\u8F6F\u94FE\u63A5-symlinks" tabindex="-1"><a class="header-anchor" href="#\u57FA\u4E8E\u4F9D\u8D56\u89E3\u6790\u7684\u8F6F\u94FE\u63A5-symlinks" aria-hidden="true">#</a> \u57FA\u4E8E\u4F9D\u8D56\u89E3\u6790\u7684\u8F6F\u94FE\u63A5 symlinks</h3><p>\u89C2\u5BDF\u4EE5\u4E0B\u4F9D\u8D56\u5305\u7ED3\u6784</p><div class="language-file ext-file line-numbers-mode"><pre class="language-file"><code>node_modules
\u251C\u2500\u2500 foo -&gt; ./.pnpm/foo@1.0.0/node_modules/foo
\u2514\u2500\u2500 .pnpm
    \u251C\u2500\u2500 bar@1.0.0
    \u2502   \u2514\u2500\u2500 node_modules
    \u2502       \u2514\u2500\u2500 bar -&gt; &lt;store&gt;/bar
    \u2514\u2500\u2500 foo@1.0.0
        \u2514\u2500\u2500 node_modules
            \u251C\u2500\u2500 foo -&gt; &lt;store&gt;/foo
            \u2514\u2500\u2500 bar -&gt; ../../bar@1.0.0/node_modules/bar
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u5728 <code>foo@1.0.0/node_modules/bar</code> \u5185\u5F15\u7528\u4E86 <code>bar</code> \u7684\u8F6F\u94FE\u63A5 <code>../../bar@1.0.0/node_modules/bar</code>\uFF0C\u800C\u5728\u9879\u76EE\u91CC\u5F15\u7528 <code>foo</code> \u7684\u8F6F\u94FE\u63A5 <code>./.pnpm/foo@1.0.0/node_modules/foo</code>\uFF0C\u5982\u679C\u9879\u76EE\u5185\u65B0\u589E\u4E00\u4E2A\u4F9D\u8D56\u5305 <code>qar@2.0.0</code>\uFF0C\u5219\u5176\u5F15\u7528\u7ED3\u6784\u5982\u4E0B\uFF1A</p><div class="language-file ext-file line-numbers-mode"><pre class="language-file"><code>node_modules
\u251C\u2500\u2500 foo -&gt; ./.pnpm/foo@1.0.0/node_modules/foo
\u2514\u2500\u2500 .pnpm
    \u251C\u2500\u2500 bar@1.0.0
    \u2502   \u2514\u2500\u2500 node_modules
    \u2502       \u251C\u2500\u2500 bar -&gt; &lt;store&gt;/bar
    \u2502       \u2514\u2500\u2500 qar -&gt; ../../qar@2.0.0/node_modules/qar
    \u251C\u2500\u2500 foo@1.0.0
    \u2502   \u2514\u2500\u2500 node_modules
    \u2502       \u251C\u2500\u2500 foo -&gt; &lt;store&gt;/foo
    \u2502       \u251C\u2500\u2500 bar -&gt; ../../bar@1.0.0/node_modules/bar
    \u2502       \u2514\u2500\u2500 qar -&gt; ../../qar@2.0.0/node_modules/qar
    \u2514\u2500\u2500 qar@2.0.0
        \u2514\u2500\u2500 node_modules
            \u2514\u2500\u2500 qar -&gt; &lt;store&gt;/qar
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div>`,7),ze=e("\u6839\u636E\u524D\u6587\u6211\u4EEC\u4ECB\u7ECD\u5230\u7684"),Be={href:"https://nodejs.org/api/modules.html#all-together",target:"_blank",rel:"noopener noreferrer"},Ve=n("code",null,"Nodejs",-1),Le=e("\u7684\u4F9D\u8D56\u89E3\u6790\u89C4\u5219"),Ge=e("\uFF0C"),Ie=n("code",null,"foo@1.0.0/node_modules/foo/index.js",-1),Se=e(" \u4E2D\u6240\u9700\u7684\u4F9D\u8D56\u5305 "),We=n("code",null,"bar",-1),Fe=e("\uFF0C\u5B9E\u9645\u4E0A\u4F7F\u7528\u7684\u662F"),Je=n("code",null,"bar@1.0.0/node_modules/bar",-1),Pe=e("\u4E2D\u7684\u5185\u5BB9\uFF0C\u56E0\u6B64\uFF0C\u53EA\u6709"),He=n("strong",null,"\u771F\u6B63\u5728\u4F9D\u8D56\u9879\u4E2D\u7684\u5305\u624D\u80FD\u88AB\u8BBF\u95EE\u5230",-1),Me=e("\u3002\u800C\u5BF9\u4E8E\u4E0D\u540C\u7684 "),De=n("code",null,"peer dependencies",-1),Oe=e(" \u7684\u4F9D\u8D56\u89E3\u6790\u539F\u7406\uFF0C\u53EF\u4EE5\u53C2\u8003\u8FD9\u91CC "),Ke={href:"https://pnpm.io/zh/how-peers-are-resolved",target:"_blank",rel:"noopener noreferrer"},Te=e("How peers are resolved"),Ye=n("p",null,[e("\u901A\u8FC7"),n("strong",null,[e("\u57FA\u4E8E\u786C\u94FE\u63A5\u7684"),n("code",null,"node_modules"),n("strong",null,"\u548C"),e("\u57FA\u4E8E\u4F9D\u8D56\u89E3\u6790\u7684\u8F6F\u94FE\u63A5")]),e("\u539F\u7406\uFF0C\u6211\u4EEC\u4E86\u89E3\u5230\uFF0C\u5F53\u6211\u4EEC\u5728\u76F8\u540C\u64CD\u4F5C\u7CFB\u7EDF\u4E0B\u7B2C\u4E8C\u6B21\u5B89\u88C5\u540C\u4E00\u4E2A\u4F9D\u8D56\u5305\u65F6\uFF0C\u6211\u4EEC\u9700\u8981\u505A\u7684\u4EC5\u4EC5\u662F\u521B\u5EFA\u4E00\u4E2A\u8BE5\u4F9D\u8D56\u5305\u5BF9\u5E94\u7684\u786C\u94FE\u63A5\uFF0C\u5BF9\u4E8E\u540C\u4E00\u4E2A\u4F9D\u8D56\u5305\u7684\u4E0D\u540C\u7248\u672C\uFF0C\u4E5F\u53EA\u6709\u4E0D\u540C\u7684\u90E8\u5206\u4F1A\u88AB\u91CD\u65B0\u4FDD\u5B58\u8D77\u6765\uFF0C\u800C\u5177\u4F53\u6709\u6CA1\u6709 "),n("code",null,"pnpm"),e(" \u662F\u5728\u54EA\u91CC\u5224\u65AD\u7684\u5462\uFF1F\u5168\u5C40\u7684 "),n("code",null,"pnpm"),e(" \u7D22\u5F15\u6587\u4EF6\u5728 "),n("code",null,"\uFF5E/.pnpm-store/v3/files"),e("\u3002\u57FA\u4E8E\u6B64\uFF0C\u4F7F\u7528\u786C\u94FE\u63A5\u8BA9\u4F9D\u8D56\u5305\u7684\u5B89\u88C5\u901F\u5EA6\u975E\u5E38\u5FEB\uFF0C\u540C\u65F6\u4E5F\u53BB\u9664\u4E86\u5197\u4F59\uFF0C\u8282\u7701\u8F83\u5927\u78C1\u76D8\u7A7A\u95F4\u3002")],-1),$e={href:"https://zh.wikipedia.org/wiki/%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5",target:"_blank",rel:"noopener noreferrer"},Qe=e("symlinks \u7B26\u53F7\u8FDE\u63A5"),Re=n("h2",{id:"pnpm-\u4F7F\u7528",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#pnpm-\u4F7F\u7528","aria-hidden":"true"},"#"),e(" pnpm \u4F7F\u7528")],-1),Ue=e("pnpm \u7684\u5177\u4F53\u4F7F\u7528\u8FD9\u91CC\u6211\u4EEC\u4E0D\u5C55\u5F00\u4ECB\u7ECD\u4E86\uFF0C\u53EF\u4EE5\u67E5\u770B\u5B98\u7F51"),Xe={href:"https://pnpm.io/zh/pnpm-cli",target:"_blank",rel:"noopener noreferrer"},Ze=e("\u4F7F\u7528\u65B9\u6CD5"),ns=e("\u548C"),es={href:"https://pnpm.io/zh/cli/add",target:"_blank",rel:"noopener noreferrer"},ss=e("CLI \u547D\u4EE4"),os=e("\u5373\u53EF\u3002\u8FD9\u91CC\u53EA\u63D0\u51E0\u4E2A\u6709\u610F\u601D\u7684\u70B9"),ts=t(`<h3 id="ci-\u96C6\u6210" tabindex="-1"><a class="header-anchor" href="#ci-\u96C6\u6210" aria-hidden="true">#</a> CI \u96C6\u6210</h3><p>\u5728 <code>GitHub Actions</code> \u4E0A\uFF0C\u4F60\u53EF\u4EE5\u50CF\u8FD9\u6837\u4F7F\u7528 <code>pnpm</code> \u5B89\u88C5\u548C\u7F13\u5B58\u4F9D\u8D56\u9879\uFF0C\u914D\u7F6E\u6587\u4EF6\u76EE\u5F55\uFF1A <code>.github/workflows/NAME.yml</code></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> pnpm Example Workflow
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span><span class="token number">20.04</span>
    <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
      <span class="token key atrule">matrix</span><span class="token punctuation">:</span>
        <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
    <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> pnpm/action<span class="token punctuation">-</span>setup@v2.0.1
      <span class="token key atrule">with</span><span class="token punctuation">:</span>
        <span class="token key atrule">version</span><span class="token punctuation">:</span> 6.20.3
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Use Node.js $<span class="token punctuation">{</span><span class="token punctuation">{</span> matrix.node<span class="token punctuation">-</span>version <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v2
      <span class="token key atrule">with</span><span class="token punctuation">:</span>
        <span class="token key atrule">node-version</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> matrix.node<span class="token punctuation">-</span>version <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">cache</span><span class="token punctuation">:</span> <span class="token string">&#39;pnpm&#39;</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install dependencies
      <span class="token key atrule">run</span><span class="token punctuation">:</span> pnpm install
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><code>pnpm</code> \u9664\u4E86\u5728\u5F00\u53D1\u4F53\u9A8C\u65B9\u9762\u7684\u4F18\u8D8A\u8868\u73B0\uFF0C\u5728\u9879\u76EE\u96C6\u6210\u65B9\u9762\u4E5F\u6BEB\u4E0D\u900A\u8272\uFF0C\u5BF9\u4E8E\u8F83\u5927\u578B\u9879\u76EE\u4ECE <code>npm \u6216 yarn</code>\u5230<code>pnpm</code>\u8FC1\u79FB\u8FC7\u7A0B\u540E\uFF0C\u4E5F\u5F97\u5230\u4E86\u6781\u5927\u7684\u4F18\u5316\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF1A</p><table><thead><tr><th align="none"></th><th align="none">Without cache</th><th align="none">With cache</th></tr></thead><tbody><tr><td align="none">yarn 2 (without dedupe)</td><td align="none">6min 31s</td><td align="none">1min 11s</td></tr><tr><td align="none">yarn 3 (without dedupe)</td><td align="none">4min 50s</td><td align="none">57s</td></tr><tr><td align="none">yarn 3</td><td align="none">4min 1s</td><td align="none">50s</td></tr><tr><td align="none">yarn 3 (optimized)</td><td align="none">1min 10</td><td align="none">45s</td></tr><tr><td align="none">pnpm</td><td align="none">58s</td><td align="none">24s</td></tr></tbody></table><p>\u901A\u8FC7\u4EE5\u4E0A\u6570\u636E\uFF0C\u6211\u4EEC\u53EF\u4EE5 <code>pnpm</code> \u5728 CI \u5E94\u7528\u4E2D\u7684\u826F\u597D\u8868\u73B0\u3002</p>`,6),as=e("\u5177\u4F53\u53EF\u4EE5\u53C2\u8003\u8FD9\u7BC7\u6700\u4F73\u5B9E\u8DF5 "),ds={href:"https://divriots.com/blog/switching-to-pnpm",target:"_blank",rel:"noopener noreferrer"},ls=e("A story of how we migrated to pnpm"),cs=t(`<h3 id="pnpm-\u524D\u7F6E" tabindex="-1"><a class="header-anchor" href="#pnpm-\u524D\u7F6E" aria-hidden="true">#</a> pnpm \u524D\u7F6E</h3><p>\u9879\u76EE\u4E2D\u4F7F\u7528 <code>pnpm</code> \u65F6\uFF0C\u5982\u679C\u4F60\u4E0D\u5E0C\u671B\u9879\u76EE\u5185\u5176\u4ED6\u4EBA\u4F7F\u7528 <code>npm i</code> \u6216 <code>yarn</code>\u8FD9\u7C7B\u5305\u7BA1\u7406\u5668\uFF0C\u53EF\u4EE5\u5728 <code>package.json</code> \u914D\u7F6E\u6587\u4EF6\u4E2D\u6DFB\u52A0\u9884\u5B89\u88C5 <code>preinstall</code> \u914D\u7F6E\u9879\uFF0C\u4ECE\u800C\u89C4\u8303\u4F7F\u7528\u7EDF\u4E00\u7684\u5305\u7BA1\u7406\u5668\u3002</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;preinstall&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npx only-allow pnpm&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="\u7BA1\u7406-nodejs-\u7248\u672C" tabindex="-1"><a class="header-anchor" href="#\u7BA1\u7406-nodejs-\u7248\u672C" aria-hidden="true">#</a> \u7BA1\u7406 NodeJS \u7248\u672C</h3>`,4),ps=e("\u5728\u4EE5\u524D\uFF0C\u5982\u679C\u4F60\u540C\u65F6\u652F\u6491\u4E86\u591A\u4E2A\u9879\u76EE\uFF0C\u800C\u4E14\u9700\u8981\u5728\u5176\u4E2D\u5207\u6362\uFF0C\u4F60\u53EF\u80FD\u9700\u8981\u5207\u6362\u4E0D\u540C\u7684 "),rs=n("code",null,"NodeJS",-1),is=e(" \u7248\u672C\uFF0C\u4E5F\u8BB8\u4F60\u4F1A\u7528\u5230\u50CF "),_s=n("code",null,"nvm",-1),hs=e(" \u6216 "),us={href:"https://volta.sh/",target:"_blank",rel:"noopener noreferrer"},ms=e("Volta"),bs=e(" \u8FD9\u6837\u7684 "),gs=n("code",null,"NodeJS",-1),ks=e(" \u7248\u672C\u7BA1\u7406\u5668\uFF0C\u800C "),fs=n("code",null,"pnpm",-1),ys=e(" \u4ECE "),vs=n("code",null,"v6.12.0",-1),xs=e(" \u7248\u672C\u540E\u652F\u6301\u4E86 "),js={href:"https://pnpm.io/zh/cli/env",target:"_blank",rel:"noopener noreferrer"},ws=e("pnpm env"),Ns=e(" \u547D\u4EE4\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528\u5B83\u6765\u5B89\u88C5\u5E76\u6307\u5B9A\u4F7F\u7528\u54EA\u4E2A\u7248\u672C\u7684 "),As=n("code",null,"NodeJS",-1),Es=e(" \uFF0C\u662F\u4E0D\u662F\u65B9\u4FBF\u4E86\u5F88\u591A\u3002"),qs=n("h3",{id:"monorepo-\u652F\u6301",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#monorepo-\u652F\u6301","aria-hidden":"true"},"#"),e(" monorepo \u652F\u6301")],-1),Cs=t("\u56E0\u4E3A<code>pnpm</code> \u5BF9 <code>monorepos</code> \u7684\u5927\u529B\u652F\u6301\uFF0C\u50CF <code>Vue</code>\u3001<code>Vite</code> \u8FD9\u4E9B\u5F00\u6E90\u9879\u76EE\u4E5F\u8F6C\u800C\u4F7F\u7528\u4E86\u5B83\u3002\u4F7F\u7528<code>pnpm run</code> \u7ED3\u5408 <code>--filter</code> \u3001 <code>--recursive</code> \u548C <code>--parallel</code> \u9009\u9879\uFF0C\u53EF\u4EE5\u6307\u5B9A\u7279\u5B9A\u5305\uFF0C\u5E76\u9AD8\u901F\u6267\u884C\u76F8\u5173\u547D\u4EE4\u3002\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\u4E4B\u524D\u8981\u53E6\u5916\u5B89\u88C5 <code>lerna</code> \u8FD9\u79CD <code>monorepo</code> \u7BA1\u7406\u5DE5\u5177\u7684\u573A\u666F\uFF0C\u73B0\u5728 <code>pnpm</code> \u53EF\u4EE5\u5305\u63FD\u4E86\u3002\u8BE6\u7EC6\u6587\u7AE0\u53EF\u4EE5\u53C2\u8003\u8FD9\u91CC ",23),zs={href:"https://medium.com/pnpm/pnpm-vs-lerna-filtering-in-a-multi-package-repository-1f68bc644d6a",target:"_blank",rel:"noopener noreferrer"},Bs=e("pnpm vs Lerna: filtering in a multi-package repository"),Vs=t('<h2 id="\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h2><p>\u672C\u6587\u4ECE <code>pnpm</code> \u7684\u51FA\u73B0\u80CC\u666F\u5F00\u59CB\uFF0C\u7B80\u8981\u4ECB\u7ECD\u4E86 <code>npm</code> \u7684\u53D1\u5C55\u8FC7\u7A0B\u53CA\u5B58\u5728\u7684\u95EE\u9898\uFF0C\u7EE7\u800C\u5BF9 <code>pnpm</code> \u53CA\u5176\u6548\u679C\u8FDB\u884C\u4E86\u7B80\u4ECB\uFF0C\u91CD\u70B9\u8BB2\u8FF0\u4E86 <code>pnpm</code> \u7684\u5B9E\u73B0\u539F\u7406\uFF0C\u5E76\u4ECE\u5E94\u7528\u4FA7\u9009\u62E9\u4E86\u56DB\u4E2A\u70B9\u5C55\u5F00\u3002</p><p><code>pnpm</code> \u4F5C\u4E3A\u65B0\u4E00\u4EE3\u5305\u7BA1\u7406\u5668\uFF0C\u81EA\u8EAB\u6709\u4E0D\u5C11\u4F18\u8D8A\u7684\u8868\u73B0\uFF0C\u5B83\u901A\u8FC7\u786C\u94FE\u63A5\u548C\u8F6F\u94FE\u63A5\u7684\u65B9\u5F0F\uFF0C\u89E3\u51B3\u4E86 <code>npm</code> \u5E7B\u5F71\u4F9D\u8D56\u548C\u5206\u8EAB\u95EE\u9898\uFF0C\u5E76\u4E14\u8F83\u597D\u5730\u89E3\u51B3\u4E86\u4F9D\u8D56\u5305\u590D\u7528\u95EE\u9898\uFF0C\u4ECE\u800C\u5B9E\u73B0\u4E86\u4F9D\u8D56\u5305\u9AD8\u6548\u5FEB\u901F\u7684\u5B89\u88C5\u3002\u9700\u8981\u7279\u522B\u6CE8\u610F\u7684\u662F <code>pnpm</code> \u4E25\u683C\u9075\u5FAA\u4E86 <code>Nodejs</code> \u4F9D\u8D56\u89E3\u6790\u89C4\u5219\uFF0C\u89C4\u907F\u4E86\u4E4B\u524D\u4EFB\u610F\u4F9D\u8D56\u5305\u7684\u8BBF\u95EE\u4FEE\u6539\u95EE\u9898\u3002</p>',3),Ls=e("\u5F53\u7136\uFF0C"),Gs=n("code",null,"pnpm",-1),Is=e(" \u4F7F\u7528\u8FC7\u7A0B\u4E2D\u4E5F\u5B58\u5728\u4E00\u4E9B\u95EE\u9898\uFF0C\u5305\u62EC "),Ss=n("code",null,"Vue",-1),Ws=e(" \u5B98\u65B9\u5728\u8FC1\u79FB\u8FC7\u7A0B\u4E2D\uFF0C\u4E5F\u5904\u7406\u8FC7\u90E8\u5206\u95EE\u9898\u3002\u53E6\u5916\uFF0C\u4E00\u4E9B\u5305\u4E5F\u5B58\u5728\u517C\u5BB9\u6027\u95EE\u9898\uFF0C\u7531\u4E8E\u5305\u81EA\u5DF1\u5B9E\u73B0\u4E86\u6A21\u5757\u89E3\u6790\uFF0C\u5E76\u6CA1\u6709\u9075\u5FAA\u76F8\u5173\u89C4\u8303\u3002\u4F46 "),Fs=n("code",null,"pnpm",-1),Js=e(" \u4E5F\u63D0\u4F9B\u4E86\u76F8\u5173\u89E3\u51B3\u65B9\u6CD5\u3002\u5177\u4F53\u53C2\u8003 "),Ps={href:"https://pnpm.io/faq#pnpm-does-not-work-with-your-project-here",target:"_blank",rel:"noopener noreferrer"},Hs=e("pnpm FAQ"),Ms=n("p",null,[e("\u7EFC\u4E0A\uFF0C"),n("code",null,"pnpm"),e(" \u662F\u4E00\u4E2A\u529F\u80FD\u5168\u9762\uFF0C\u6027\u80FD\u4F18\u8D8A\u7684\u5305\u7BA1\u7406\u5668\uFF0C\u5FEB\u6765\u4F53\u9A8C "),n("code",null,"pnpm"),e(" \u5427\u3002")],-1),Ds=n("h2",{id:"\u53C2\u8003\u8D44\u6599",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u53C2\u8003\u8D44\u6599","aria-hidden":"true"},"#"),e(" \u53C2\u8003\u8D44\u6599")],-1),Os={href:"https://www.yuexunjiang.me/blog/problems-with-npm-and-how-pnpm-handles-them/",target:"_blank",rel:"noopener noreferrer"},Ks=e("npm \u5B58\u5728\u7684\u95EE\u9898\u4EE5\u53CA pnpm \u662F\u600E\u4E48\u5904\u7406\u7684"),Ts={href:"https://xingyahao.com/c/pnpm-npm-yarn.html",target:"_blank",rel:"noopener noreferrer"},Ys=e("npm/yarn \u7684\u8BBE\u8BA1\u7F3A\u9677\uFF0C\u4EE5\u53CA pnpm \u662F\u5982\u4F55\u6539\u8FDB\u7684");function $s(Qs,Rs){const s=a("ExternalLinkIcon");return d(),l(c,null,[i,n("p",null,[_,h,u,m,b,g,k,n("a",f,[y,o(s)]),v,x,j,w,N,A,E,q,C,z,B]),V,n("ul",null,[L,n("li",null,[G,n("ul",null,[n("li",null,[I,S,W,F,J,P,H,M,D,O,n("ul",null,[n("li",null,[n("a",K,[T,o(s)])]),n("li",null,[n("a",Y,[$,o(s)])]),n("li",null,[n("a",Q,[R,o(s)])])])]),U])])]),X,Z,n("p",null,[nn,en,sn,on,tn,n("a",an,[dn,o(s)])]),ln,n("p",null,[cn,n("a",pn,[rn,_n,o(s)]),hn,un,mn]),bn,n("ul",null,[n("li",null,[n("a",gn,[kn,o(s)]),fn,yn,vn,xn,jn,wn,Nn,An,En,n("a",qn,[Cn,zn,o(s)]),Bn,Vn,Ln,Gn,In])]),Sn,n("ul",null,[n("li",null,[n("a",Wn,[Fn,o(s)]),Jn,Pn,Hn,Mn,Dn,On,Kn,Tn,Yn,$n,Qn])]),Rn,n("p",null,[Un,Xn,Zn,ne,n("a",ee,[se,o(s)]),oe,te,ae,de,le,ce,pe]),re,ie,_e,n("blockquote",null,[n("p",null,[he,n("a",ue,[me,o(s)])])]),be,n("p",null,[ge,ke,fe,ye,n("a",ve,[xe,o(s)]),je,we,Ne,n("a",Ae,[Ee,o(s)]),qe]),Ce,n("p",null,[ze,n("a",Be,[Ve,Le,o(s)]),Ge,Ie,Se,We,Fe,Je,Pe,He,Me,De,Oe,n("a",Ke,[Te,o(s)])]),Ye,n("blockquote",null,[n("p",null,[n("a",$e,[Qe,o(s)])])]),Re,n("p",null,[Ue,n("a",Xe,[Ze,o(s)]),ns,n("a",es,[ss,o(s)]),os]),ts,n("blockquote",null,[n("p",null,[as,n("a",ds,[ls,o(s)])])]),cs,n("p",null,[ps,rs,is,_s,hs,n("a",us,[ms,o(s)]),bs,gs,ks,fs,ys,vs,xs,n("a",js,[ws,o(s)]),Ns,As,Es]),qs,n("p",null,[Cs,n("a",zs,[Bs,o(s)])]),Vs,n("p",null,[Ls,Gs,Is,Ss,Ws,Fs,Js,n("a",Ps,[Hs,o(s)])]),Ms,Ds,n("ul",null,[n("li",null,[n("a",Os,[Ks,o(s)])]),n("li",null,[n("a",Ts,[Ys,o(s)])])])],64)}var Zs=p(r,[["render",$s]]);export{Zs as default};
